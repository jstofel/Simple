{% extends "layout.html" %}
{% block body %}

<!--This is the template for page content. It has the following parameters:
pageresult:  a SQl Alxchemy ResultProxy object. This is the result of a sql
             query on the Page table, containing data that is 'like' the 
	     columns and rows of a table. See the manual for all methods to 
	     access data from this object. The specific methods used in this
	     template are:
	     1. fetchone() is used in the layout template to get the page title
	          from the first record in the object (the title of the index page)
		  and put it in the subheader. This method moves the cursor to the
		  next record, so the next method (the jinja for loop) starts there
	     2. for o in pageresult:  gets each remaining row in turn. Used to
	          display the list of the rest of the pages (after the index page).
	     3. rowcount: counts the number of rows in the object
	     See documentation for, say, the fetchone method, at 
http://docs.sqlalchemy.org/en/latest/core/connections.html?highlight=fetchone#sqlalchemy.engine.ResultProxy.fetchone
Note that the ResultProxy object "Wraps a DB-API cursor object to provide easier access to row columns."
and the methods are DBA-API cursor methods... They seem to only go forward, not backward on stay in place.
-->

<!--Show the Index Page: Where the User Has Not Yet Selected a Page-->
{% if pageresult.rowcount > 1 %}

 <div id="addPageSectionDiv" class=""  style='float:right; width:30%;'>
   <div style='float:right; width=90%'>
    <input type='button' id='showAddPage' value='Add Page' style='width:9rem' 
	   onClick="$('#addPageFormDiv').toggle(); $('#showAddPage').toggle()" >
   </div>

   <!-- Add a form to add a new page -->
   {% from "_formhelpers.html" import render_field %}

   <div id="addPageFormDiv" class="" style='float:right;width:90%; display:none' >
    <form id = "addPage" action="{{url_for('index')}}" method=POST>
       <div style='float:right'>  {{ form.submit }} </div>
       <br>
       <dl>
       {{ render_field(form.new_page_name) }} 
       {{ render_field(form.new_page_title) }}
       </dl>
       <input type = "hidden" name="page_id" value="{{page_id}}" >
    </form>
   </div>
 </div>

  <!-- Show ordered list of page names out of the pageInfo dataframe. The 0th record is the index title, so not included in list-->
  <ol>
  {% for i in pageInfo.index %}
   {% if i > 0 %}
     <li>  
      <a href="/{{pageInfo['page_target'][i]}}?page_id={{pageInfo['page_id'][i]}}">{{pageInfo['page_name'][i]}}</a>  
     </li>
   {% endif %}
  {% endfor %}
  </ol>

{% endif %}





{% endblock %}
