{% extends "layout.html" %}

{% block body %}

<!--Put in a Markdown Editor to accept content-->
<!-- It has a Show/Hide Button, a Div with instructions, an Editor div that lets you write, and a Target div 
     that shows what you've written, all closed out by a div to clear the floats.
     The functionality of this Markdown editor comes from the ShowDown library
     at http://showdownjs.github.io/demo/ by John Fraser. -->

<form id="tester"
      action="/{{pageInfo['page_template'][0]}}?page_id={{pageInfo['page_id'][0]}}&dbname={{dbname}}"
      method="POST" >
<div id="BUTTONS" class=""  style='float:left; width:98%; height:3rem '>
 <input type='button' id='showEditContent' value='Edit Content' style='width:8rem' >
 <input type='submit' id='saveit' value='Submit'  style='display:none' >
 <input type = "hidden" name="page_id" value="{{pageInfo['page_id'][0]}}" >
 <input type = "hidden" name="page_template" value="{{pageInfo['page_template'][0]}}" >
 <input type = "hidden" name="database" value="{{dbname}}" >
 <input type = "hidden" name="content_id" value="{{pageContent['content_id'][0]}}" > 
</div>

<!--This div appears empty, but it is populated from pageContent['content_md'] by the runConverter() script -->
<div id="targetDiv" class=""  style='float:left; width:100%;'>

</div>

<!--This div is where content is written. It is hidden by default, and shown when the Edit Content button is activated-->
<div id="INSTRUCTIONS"  class="" style='float:left; width:45% ; height:3rem; display:none; margin-left:3rem;  '>
 Edit the content in the textarea below using markdown styling, and see how it renders on the left.
<textarea id="sourceTA" name="content_md" rows="120" cols="100"   onInput="runConverter()">{{pageContent['content_md'][0]}}</textarea>
</div>
</form>

<!--This div clears the floats-->
<div style='float:none'> </div>

<!-- This script is specific to the content form to toggle the show/hide buttons -->
<script>
  //Set the toggling of the Editor functions
  jQuery(document).ready(function(){
   jQuery('#showEditContent').on('click', function(event) {
             $('#editorDiv').toggle();
             $('#INSTRUCTIONS').toggle();
             if ( $(this).val() == 'Close Editor' ) {
                 $(this).val('Edit Content');
                 $('#targetDiv').width('100%');
                 $('#saveit').hide()
             } else {
                 $(this).val('Close Editor');
                 $('#targetDiv').width('48%');
                 $('#saveit').show()
            }
   });
  });
</script>

{% endblock %}


